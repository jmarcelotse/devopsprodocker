# Exemplo Pr√°tico com Docker Volume
Este exemplo pr√°tico demonstra como criar e usar um volume no Docker para armazenar dados persistentes. Vamos criar um cont√™iner MySQL com um volume para garantir que os dados do banco sejam preservados, mesmo que o cont√™iner seja removido.

# 1. Criando um Volume Docker
Antes de criar o cont√™iner, criaremos um volume Docker para armazenar os dados do banco.

bash
```
docker volume create mysql-volume
```
## Verificar o Volume Criado
bash
```
docker volume ls
```
### Sa√≠da esperada:

bash
```
DRIVER    VOLUME NAME
local     mysql-volume
```
# 2. Executando o Cont√™iner com Volume
Agora, vamos criar um cont√™iner MySQL que usa o volume `mysql-volume` para armazenar os dados.

bash
```
docker run -d \
  --name mysql-container \
  -e MYSQL_ROOT_PASSWORD=rootpassword \
  -v mysql-volume:/var/lib/mysql \
  mysql:latest
```
## Explica√ß√£o:
- `-d`: Roda o cont√™iner em segundo plano.
- `--name mysql-container`: D√° um nome ao cont√™iner.
- `-e MYSQL_ROOT_PASSWORD=rootpassword`: Define a senha do usu√°rio root do MySQL.
- `-v mysql-volume:/var/lib/mysql`: Monta o volume no caminho onde o MySQL armazena os dados.

# 3. Testando a Persist√™ncia de Dados
## Passo 1: Conectar ao Banco de Dados
1. Acesse o cont√™iner:

bash
```
docker exec -it mysql-container mysql -uroot -prootpassword
```
2. Crie um banco de dados e uma tabela simples:

sql
```
CREATE DATABASE teste;
USE teste;
CREATE TABLE exemplo (id INT PRIMARY KEY, nome VARCHAR(50));
INSERT INTO exemplo VALUES (1, 'Docker Volume');
SELECT * FROM exemplo;
```
3. Saia do MySQL:

bash
```
exit
```
## Passo 2: Remover o Cont√™iner
Remova o cont√™iner:

bash
```
docker rm -f mysql-container
```
## Passo 3: Recriar o Cont√™iner
Recrie o cont√™iner usando o mesmo volume:

bash
```
docker run -d \
  --name mysql-container \
  -e MYSQL_ROOT_PASSWORD=rootpassword \
  -v mysql-volume:/var/lib/mysql \
  mysql:latest
```
## Passo 4: Verificar os Dados Persistentes
Conecte-se novamente ao banco e verifique se os dados ainda est√£o dispon√≠veis:

1. Acesse o MySQL:

bash
```
docker exec -it mysql-container mysql -uroot -prootpassword
```
2. Consulte a tabela:

sql
```
USE teste;
SELECT * FROM exemplo;
```
### Sa√≠da esperada:

diff
```
+----+---------------+
| id | nome          |
+----+---------------+
|  1 | Docker Volume |
+----+---------------+
```
# 4. Inspecionando o Volume
## Verifique os Detalhes do Volume
Para obter mais informa√ß√µes sobre o volume, use:

bash
```
docker volume inspect mysql-volume
```
### Sa√≠da esperada:

json
```
[
  {
    "CreatedAt": "2024-12-20T10:00:00Z",
    "Driver": "local",
    "Labels": null,
    "Mountpoint": "/var/lib/docker/volumes/mysql-volume/_data",
    "Name": "mysql-volume",
    "Options": {},
    "Scope": "local"
  }
]
```
# 5. Backup e Restaura√ß√£o do Volume
## Backup
Crie um backup do volume usando `tar`:

bash
```
docker run --rm \
  -v mysql-volume:/dados \
  -v $(pwd):/backup \
  ubuntu \
  tar czvf /backup/mysql-volume-backup.tar.gz /dados
```

O backup ser√° salvo no diret√≥rio atual como `mysql-volume-backup.tar.gz`.

## Restaura√ß√£o
Para restaurar os dados no volume:

1. Crie o volume (se necess√°rio):

bash
```
docker volume create mysql-volume
```
2. Restaure os dados:

bash
```
docker run --rm \
  -v mysql-volume:/dados \
  -v $(pwd):/backup \
  ubuntu \
  tar xzvf /backup/mysql-volume-backup.tar.gz -C /
```
# 6. Usando Docker Compose com Volume
Voc√™ tamb√©m pode gerenciar volumes facilmente usando o Docker Compose.

## docker-compose.yml
yaml
```
version: "3.9"
services:
  mysql:
    image: mysql:latest
    container_name: mysql-container
    environment:
      MYSQL_ROOT_PASSWORD: rootpassword
    volumes:
      - mysql-volume:/var/lib/mysql

volumes:
  mysql-volume:
```
Executar os Servi√ßos
bash
```
docker-compose up -d
```
# 7. Conclus√£o
Volumes no Docker s√£o uma ferramenta poderosa para persist√™ncia de dados e gerenciamento de armazenamento. Neste exemplo, mostramos como criar, usar e gerenciar volumes para proteger dados de bancos de dados ou outras aplica√ß√µes.

## Resumo:
- **Criar Volume**: `docker volume create <nome-do-volume>`
- **Usar Volume**: `-v <nome-do-volume>:<caminho-no-cont√™iner>`
- **Inspecionar Volume**: `docker volume inspect <nome-do-volume>`
- **Backup/Restaura√ß√£o**: `Use tar para compactar e descompactar os dados`.

Se precisar de ajuda para configurar volumes ou implementar backup/restore, √© s√≥ chamar! üöÄüòä
