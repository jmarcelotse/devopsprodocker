# Projeto Pr√°tico com o Que Aprendemos: Aplica√ß√£o Funcional com Docker
Vamos combinar conceitos de **Docker Volume**, **Bind Mount**, e **tmpfs** para criar um projeto pr√°tico. Este projeto ser√° uma aplica√ß√£o Node.js que:

1. Armazena dados de forma persistente com **Docker Volumes**.
2. Sincroniza c√≥digo-fonte com **Bind Mount** para desenvolvimento.
3. Usa **tmpfs** para armazenar logs tempor√°rios.

## Objetivo do Projeto
Construir um aplicativo de gerenciamento de tarefas:
  - Persistir tarefas no banco de dados (com Docker Volumes).
  - Sincronizar o c√≥digo-fonte para desenvolvimento local (com Bind Mount).
  - Armazenar logs tempor√°rios na mem√≥ria (com tmpfs).

## Estrutura do Projeto
go
```
docker-todo-app/
‚îÇ
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ server.js
‚îÇ   ‚îú‚îÄ‚îÄ database.json
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ docker-compose.yml
```
# 1. Criando a Aplica√ß√£o Node.js
`server.js`:

javascript
```
const express = require('express');
const fs = require('fs');
const app = express();
const port = 3000;

const DB_FILE = './data/database.json';
const LOG_FILE = '/logs/app.log';

app.use(express.json());

// Middleware para logar as requisi√ß√µes
app.use((req, res, next) => {
    const log = `${new Date().toISOString()} - ${req.method} ${req.url}\n`;
    fs.appendFileSync(LOG_FILE, log);
    next();
});

// Listar tarefas
app.get('/tasks', (req, res) => {
    const tasks = JSON.parse(fs.readFileSync(DB_FILE, 'utf8') || '[]');
    res.json(tasks);
});

// Adicionar tarefa
app.post('/tasks', (req, res) => {
    const tasks = JSON.parse(fs.readFileSync(DB_FILE, 'utf8') || '[]');
    const newTask = { id: tasks.length + 1, ...req.body };
    tasks.push(newTask);
    fs.writeFileSync(DB_FILE, JSON.stringify(tasks, null, 2));
    res.status(201).json(newTask);
});

// Iniciar o servidor
app.listen(port, () => {
    console.log(`App rodando em http://localhost:${port}`);
});
```
`package.json`:

json
```
{
  "name": "docker-todo-app",
  "version": "1.0.0",
  "description": "Aplica√ß√£o de gerenciamento de tarefas com Docker",
  "main": "server.js",
  "scripts": {
    "start": "node server.js"
  },
  "dependencies": {
    "express": "^4.18.2"
  }
}
```
`database.json`:

json
```
[]
```
# 2. Criando o Docker Compose
`docker-compose.yml`:

yaml
```
version: "3.9"
services:
  app:
    image: node:16-alpine
    container_name: todo-app
    working_dir: /usr/src/app
    volumes:
      - ./app:/usr/src/app
      - todo-data:/usr/src/app/data
    tmpfs:
      - /logs:rw,noexec,size=64m
    ports:
      - "3000:3000"
    command: npm start
volumes:
  todo-data:
```
# 3. Iniciando o Projeto
1. **Instalar Depend√™ncias Localmente**: No diret√≥rio `app`, execute:

bash
```
npm install
```
2. **Iniciar os Servi√ßos com Docker Compose**:

bash
```
docker-compose up -d
```
3. **Verificar os Logs**: Os logs s√£o armazenados na mem√≥ria (`tmpfs`) no cont√™iner:

bash
```
docker exec todo-app tail -f /logs/app.log
```
4. **Testar a Aplica√ß√£o**: Use o **Postman**, **cURL**, ou o navegador para interagir com a API.

# 4. Testando a Aplica√ß√£o
## 4.1 Listar Tarefas
Fa√ßa uma requisi√ß√£o GET:

bash
```
curl http://localhost:3000/tasks
```
### Resposta:

json
```
[]
```
## 4.2 Adicionar Tarefa
Fa√ßa uma requisi√ß√£o POST:

bash
```
curl -X POST -H "Content-Type: application/json" -d '{"name": "Aprender Docker"}' http://localhost:3000/tasks
```
### Resposta:

json
```
{
  "id": 1,
  "name": "Aprender Docker"
}
```
## 4.3 Listar Tarefas Ap√≥s Adicionar
bash
```
curl http://localhost:3000/tasks
```
### Resposta:

json
```
[
  {
    "id": 1,
    "name": "Aprender Docker"
  }
]
```
# 5. Persist√™ncia e Logs
1. **Persist√™ncia dos Dados**: Os dados das tarefas s√£o armazenados no volume nomeado `todo-data`. Mesmo se o cont√™iner for removido, os dados permanecem:

bash
```
docker volume inspect todo-data
```
2. **Logs Tempor√°rios**: Os logs s√£o armazenados em mem√≥ria com `tmpfs`. Reiniciar o cont√™iner limpa os logs:

bash
```
docker-compose restart
docker exec todo-app ls /logs
```
# 6. Personaliza√ß√£o
- **Expandir Funcionalidade**:
  - Adicione endpoints para editar ou remover tarefas.

- **Configurar Backup de Volume**:
  - Fa√ßa backups do volume `todo-data` com:

bash
```
docker run --rm \
  -v todo-data:/dados \
  -v $(pwd):/backup \
  ubuntu tar czvf /backup/todo-data-backup.tar.gz /dados
```
- **Adicionar UI**:
  - Crie uma interface web com HTML/JavaScript e sirva os arquivos est√°ticos.

# 7. Conclus√£o
Este projeto combina v√°rios conceitos:
1. **Persist√™ncia com Docker Volumes**: Os dados das tarefas s√£o salvos em todo-data.
2. **Desenvolvimento com Bind Mount**: O c√≥digo-fonte √© sincronizado entre o host e o cont√™iner.
3. **Logs Tempor√°rios com tmpfs**: Os logs s√£o armazenados em mem√≥ria, melhorando o desempenho.

Voc√™ agora tem uma aplica√ß√£o funcional baseada no que aprendeu sobre Docker! üöÄ

Se precisar de ajuda para expandir ou ajustar o projeto, √© s√≥ chamar! üòä