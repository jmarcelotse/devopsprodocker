# Executar Docker no Windows Usando WSL (Windows Subsystem for Linux)
O **Windows Subsystem for Linux (WSL)** permite rodar um kernel Linux diretamente no Windows, o que torna poss√≠vel usar o Docker nativamente dentro do WSL. Essa abordagem oferece uma solu√ß√£o eficiente e leve para executar cont√™ineres Linux, sem a necessidade de ferramentas como Docker Desktop.

# 1. O que √© WSL?
O **WSL** √© um subsistema que permite executar distribui√ß√µes Linux no Windows. Com o WSL 2, voc√™ obt√©m um kernel Linux completo, o que habilita a execu√ß√£o nativa de aplicativos Linux, como o Docker.

## Vantagens de Usar o Docker no WSL
- **Desempenho Melhorado**:
  - Menor sobrecarga em compara√ß√£o com Docker Desktop.
## Integra√ß√£o Direta com o Linux:
  - A execu√ß√£o nativa no WSL reduz problemas de compatibilidade.
## Gratuito:
  - N√£o est√° sujeito √†s restri√ß√µes de licen√ßa do Docker Desktop.

# 2. Pr√©-requisitos
## 2.1 Sistema Operacional
- **Windows 10 (build 19041 ou superior) ou Windows 11**.
## 2.2 Habilitar WSL e WSL 2
Certifique-se de que o WSL 2 est√° instalado:

powershell
```
wsl --install
```
Verifique se o kernel do WSL 2 est√° atualizado:

powershell
```
wsl --update
```
Configure o WSL 2 como padr√£o:

powershell
```
wsl --set-default-version 2
```
## 2.3 Instale uma Distribui√ß√£o Linux
Instale uma distribui√ß√£o Linux (ex.: Ubuntu):

powershell
```
wsl --install -d Ubuntu
```
# 3. Instalando o Docker no WSL
## 3.1 Configurar o Ambiente Linux
1. Abra o terminal do WSL (ex.: Ubuntu).
2. Atualize o sistema:

bash
```
sudo apt update && sudo apt upgrade -y
```
## 3.2 Instalar o Docker
Adicione o reposit√≥rio oficial do Docker:

bash
```
sudo apt-get install -y ca-certificates curl gnupg lsb-release
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
```
2. Instale o Docker Engine:

bash
```
sudo apt update
sudo apt install -y docker-ce docker-ce-cli containerd.io
```
3. Verifique a instala√ß√£o:

bash
```
docker --version
```
## 3.3 Configurar o Docker no WSL
1. Inicie o servi√ßo Docker:

bash
```
sudo service docker start
```
2. Adicione seu usu√°rio ao grupo `docker` para evitar usar `sudo`:

bash
```
sudo usermod -aG docker $USER
```
3. Reinicie a sess√£o do WSL ou execute:

bash
```
newgrp docker
```
4. Teste a execu√ß√£o de cont√™ineres:

bash
```
docker run hello-world
```
# 4. Integra√ß√£o Entre Windows e Docker no WSL
## 4.1 Compartilhar Arquivos Entre Windows e WSL
Os diret√≥rios do Windows podem ser acessados diretamente no WSL atrav√©s do `/mnt/`:

- Exemplo: `C:\` no Windows aparece como `/mnt/c` no WSL.
Voc√™ pode montar volumes do Windows no Docker:

bash
```
docker run -v /mnt/c/meu-diretorio:/app nginx
```
# 4.2 Configurar o Docker CLI no Windows
Voc√™ pode usar o CLI Docker no Windows para se comunicar com o Docker no WSL:

1. Instale o Docker CLI no Windows (via Docker Desktop ou manualmente).
2. Configure o CLI para apontar para o daemon do WSL:

powershell
```
set DOCKER_HOST=tcp://<endere√ßo>:2375
```
# 5. Habilitar o Docker Compose no WSL
O Docker Compose permite orquestrar m√∫ltiplos cont√™ineres com um arquivo `docker-compose.yml`.

## 5.1 Instalar o Docker Compose
Instale a vers√£o mais recente do Docker Compose no WSL:

bash
```
sudo curl -L "https://github.com/docker/compose/releases/download/v2.20.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
```
Verifique a instala√ß√£o:

bash
```
docker-compose --version
```
## 5.2 Exemplo de Uso
Crie um arquivo `docker-compose.yml`:

yaml
```
version: '3.8'
services:
  web:
    image: nginx
    ports:
      - "8080:80"
```
Execute o Docker Compose:

bash
```
docker-compose up -d
```
# 6. Gerenciando Recursos no WSL
O WSL 2 usa uma VM Linux para gerenciar recursos como CPU e mem√≥ria. Voc√™ pode ajustar esses valores para otimizar o desempenho do Docker.
## 6.1 Configura√ß√£o de Recursos
Crie ou edite o arquivo `.wslconfig` no diret√≥rio do usu√°rio do Windows (`C:\Users\<seu-usuario>`):

ini
```
[wsl2]
memory=4GB
processors=2
swap=0
localhostForwarding=true
```
Reinicie o WSL:

powershell
```
wsl --shutdown
```
# 7. Solu√ß√£o de Problemas
## 7.1 Docker N√£o Est√° Funcionando
Certifique-se de que o servi√ßo Docker est√° ativo:

bash
```
sudo service docker start
```
## 7.2 Permiss√£o Negada ao Executar Docker
Adicione seu usu√°rio ao grupo `docker` e reinicie a sess√£o:

bash
```
sudo usermod -aG docker $USER
newgrp docker
```
## 7.3 Problemas com o Kernel do WSL 2
Atualize o kernel:

powershell
```
wsl --update
```
# 8. Compara√ß√£o: Docker no WSL vs Docker Desktop
| Aspecto            | Docker no WSL                 | Docker Desktop                                                |
| ------------------ | ----------------------------- | ------------------------------------------------------------- |
| Licen√ßa            | Gratuito                      | Gratuito para uso pessoal, mas licenciado para uso comercial. |
| Desempenho         | Melhor para cont√™ineres Linux | √ìtimo para Linux e Windows.                                   |
| Integra√ß√£o com GUI | N√£o integrada                 | GUI completa para gerenciar Docker.                           |
| Configura√ß√£o       | Mais manual                   | Autom√°tica.                                                   |


# 9. Conclus√£o
Rodar o Docker diretamente no WSL 2 √© uma alternativa poderosa e gratuita ao Docker Desktop, oferecendo alto desempenho e integra√ß√£o com o ambiente Linux. Essa abordagem √© ideal para desenvolvedores que precisam trabalhar com cont√™ineres Linux e preferem gerenciar suas ferramentas manualmente. Com o WSL, voc√™ pode aproveitar o melhor dos dois mundos: a flexibilidade do Linux e a praticidade do Windows.

Se precisar de ajuda para configurar ou otimizar o Docker no WSL, √© s√≥ pedir! üòä