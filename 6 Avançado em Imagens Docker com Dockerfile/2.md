# Criando Sua Primeira Imagem Docker com um Dockerfile
Vamos criar juntos sua primeira imagem Docker utilizando um Dockerfile. Neste exemplo, construiremos um ambiente bÃ¡sico para uma aplicaÃ§Ã£o em **Node.js**, mas vocÃª pode adaptar para outras linguagens ou necessidades.

# 1. Estrutura do Projeto
Crie a seguinte estrutura de arquivos:

bash
```
primeira-imagem/
â”‚
â”œâ”€â”€ app.js                 # CÃ³digo da aplicaÃ§Ã£o em Node.js
â”œâ”€â”€ package.json           # ConfiguraÃ§Ãµes do projeto Node.js
â””â”€â”€ Dockerfile             # Arquivo para criar a imagem Docker
```
# 2. Criando os Arquivos
## 2.1 Arquivo app.js
Este serÃ¡ o cÃ³digo da nossa aplicaÃ§Ã£o bÃ¡sica em Node.js:

javascript
```
const express = require('express');
const app = express();
const port = 3000;

app.get('/', (req, res) => {
    res.send('OlÃ¡, mundo! Sua primeira imagem Docker estÃ¡ funcionando!');
});

app.listen(port, () => {
    console.log(`AplicaÃ§Ã£o rodando em http://localhost:${port}`);
});
```
## 2.2 Arquivo package.json
Este arquivo define as dependÃªncias da aplicaÃ§Ã£o:

json
```
{
  "name": "primeira-imagem",
  "version": "1.0.0",
  "description": "Minha primeira aplicaÃ§Ã£o Docker",
  "main": "app.js",
  "scripts": {
    "start": "node app.js"
  },
  "dependencies": {
    "express": "^4.18.2"
  }
}
```
Instale as dependÃªncias antes de prosseguir. Execute o comando no diretÃ³rio `primeira-imagem`:

bash
```
npm install
```
## 2.3 Criando o Dockerfile
O **Dockerfile** define as instruÃ§Ãµes para criar sua imagem Docker. Crie o arquivo `Dockerfile` com o seguinte conteÃºdo:

dockerfile
```
# Usar uma imagem base do Node.js
FROM node:16

# Definir o diretÃ³rio de trabalho dentro do contÃªiner
WORKDIR /usr/src/app

# Copiar os arquivos de configuraÃ§Ã£o para o contÃªiner
COPY package*.json ./

# Instalar as dependÃªncias da aplicaÃ§Ã£o
RUN npm install

# Copiar o restante dos arquivos do projeto
COPY . .

# Expor a porta usada pela aplicaÃ§Ã£o
EXPOSE 3000

# Comando para iniciar a aplicaÃ§Ã£o
CMD ["npm", "start"]
```
# 3. Construindo e Executando a Imagem
## 3.1 Construindo a Imagem
No terminal, acesse o diretÃ³rio onde estÃ¡ o Dockerfile e execute o comando:

bash
```
docker build -t minha-primeira-imagem .
```
- `-t minha-primeira-imagem`: DÃ¡ um nome Ã  sua imagem.
- `.`: Indica que o contexto de build Ã© o diretÃ³rio atual.

## 3.2 Listando a Imagem
Depois de construÃ­da, liste as imagens disponÃ­veis:

bash
```
docker images
```
SaÃ­da esperada:

```
REPOSITORY             TAG       IMAGE ID       CREATED        SIZE
minha-primeira-imagem  latest    a1b2c3d4e5f6   10 seconds ago 150MB
```

## 3.3 Executando o ContÃªiner
Inicie um contÃªiner baseado na imagem criada:

bash
```
docker run -p 3000:3000 minha-primeira-imagem
```
- `-p 3000:3000`: Mapeia a porta do contÃªiner (3000) para o host.

Abra o navegador e acesse: http://localhost:3000.

# 4. Parando e Gerenciando o ContÃªiner
## 4.1 Parar o ContÃªiner
Pressione `Ctrl + C` para parar o contÃªiner.

## 4.2 Executar em Segundo Plano
Para executar o contÃªiner em segundo plano, adicione a flag `-d`:

bash
```
docker run -d -p 3000:3000 minha-primeira-imagem
```
## 4.3 Listar ContÃªineres em ExecuÃ§Ã£o
Veja os contÃªineres em execuÃ§Ã£o:

bash
```
docker ps
```
## 4.4 Parar o ContÃªiner
Use o comando `docker stop`:

bash
```
docker stop [CONTAINER_ID]
```
# 5. Explorando a Imagem
## 5.1 HistÃ³rico da Imagem
Para entender como sua imagem foi construÃ­da camada por camada:

bash
```
docker history minha-primeira-imagem
```
## 5.2 Inspecionar a Imagem
Verifique os metadados da imagem:

bash
```
docker inspect minha-primeira-imagem
```
# 6. Melhorando o Dockerfile
## 6.1 Usando Imagens Base Leves
Para reduzir o tamanho da imagem, use imagens como `node:16-alpine`:

dockerfile
```
FROM node:16-alpine
```
## 6.2 Configurando VariÃ¡veis de Ambiente
Adicione variÃ¡veis de ambiente ao Dockerfile:

dockerfile
```
ENV PORT=3000
```
## 6.3 Ignorando Arquivos DesnecessÃ¡rios
Crie um arquivo .dockerignore para excluir arquivos desnecessÃ¡rios:

bash
```
node_modules
*.log
```
# 7. ConclusÃ£o
VocÃª acabou de criar sua primeira imagem Docker a partir de um Dockerfile! ğŸš€ Agora sua aplicaÃ§Ã£o estÃ¡ isolada e pode ser executada em qualquer ambiente com Docker instalado.

## Recapitulando os Passos:
1. Criar o cÃ³digo da aplicaÃ§Ã£o.
2. Escrever o Dockerfile.
3. Construir a imagem com `docker build`.
4. Executar o contÃªiner com `docker run`.
