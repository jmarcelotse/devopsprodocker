# ARG no Dockerfile
A instru√ß√£o `ARG` no Dockerfile √© usada para definir **vari√°veis de build** que podem ser passadas para o Docker durante o processo de constru√ß√£o da imagem. Diferente das vari√°veis definidas com `ENV`, as vari√°veis `ARG` s√≥ est√£o dispon√≠veis **durante o build** e n√£o no cont√™iner em tempo de execu√ß√£o.

# 1. Sintaxe do ARG
dockerfile
```
ARG <nome>=<valor_padr√£o>
```
- `<nome>`: Nome da vari√°vel de build.
- `<valor_padr√£o> (opcional)`: Valor atribu√≠do √† vari√°vel, caso n√£o seja passado no momento do build.

# 2. Diferen√ßas entre ARG e ENV
| Aspecto              | `ARG`                              | `ENV`                                      |
| -------------------- | ---------------------------------- | ------------------------------------------ |
| Disponibilidade      | Apenas durante o build da imagem.  | Dispon√≠vel durante o build e no cont√™iner. |
| Sobrescrita no Build | Passada com `--build-arg`.         | N√£o pode ser sobrescrita diretamente.      |
| Persist√™ncia         | N√£o √© inclu√≠da no cont√™iner final. | Inclu√≠da no cont√™iner final.               |

# 3. Exemplos de Uso
## 3.1 Definir e Usar uma Vari√°vel ARG
dockerfile
```
FROM ubuntu:20.04

# Definir uma vari√°vel ARG
ARG VERSAO=1.0

# Usar a vari√°vel ARG
RUN echo "Construindo a vers√£o $VERSAO"
```
## Construindo a Imagem:

bash
```
docker build -t minha-imagem:1.0 .
```
## 3.2 Passar um Valor Durante o Build
Voc√™ pode sobrescrever o valor padr√£o de uma vari√°vel `ARG` ao construir a imagem:

dockerfile
```
FROM ubuntu:20.04

ARG VERSAO=1.0
RUN echo "Vers√£o padr√£o: $VERSAO"
```
## Construindo a Imagem com um Novo Valor:

bash
```
docker build --build-arg VERSAO=2.0 -t minha-imagem:2.0 .
```
## Sa√≠da Esperada:

```
Vers√£o padr√£o: 2.0
```
## 3.3 Usando M√∫ltiplos ARGs
dockerfile
```
FROM ubuntu:20.04

ARG APP_NOME="Minha App"
ARG APP_PORTA=8080

RUN echo "Aplica√ß√£o: $APP_NOME, Porta: $APP_PORTA"
```
## Construindo com Valores Sobrescritos:

bash
```
docker build --build-arg APP_NOME="App de Teste" --build-arg APP_PORTA=9090 -t app:latest .
```
## 3.4 Usando ARG com ENV
Voc√™ pode usar um `ARG` para definir o valor de uma vari√°vel `ENV`. Isso torna o valor do `ARG` acess√≠vel no cont√™iner em tempo de execu√ß√£o.

dockerfile
```
FROM ubuntu:20.04

ARG APP_PORTA=8080
ENV PORT=$APP_PORTA

CMD ["bash", "-c", "echo Porta em execu√ß√£o: $PORT"]
```
## Construindo a Imagem:

bash
```
docker build --build-arg APP_PORTA=3000 -t app-com-env .
```
## Executando o Cont√™iner:

bash
```
docker run app-com-env
```
## Sa√≠da:

css
```
Porta em execu√ß√£o: 3000
```
# 3.5 Usando ARG em Imagens Base Din√¢micas
dockerfile
```
ARG BASE_IMAGE=ubuntu:20.04
FROM $BASE_IMAGE

RUN echo "Imagem base usada: $BASE_IMAGE"
```
## Construindo com uma Imagem Base Diferente:

bash
```
docker build --build-arg BASE_IMAGE=alpine:3.14 -t minha-imagem .
```
# 4. Listando Argumentos de Build no Dockerfile
Voc√™ pode listar os argumentos dispon√≠veis para o build no `Dockerfile` usando `ARG` sem valor padr√£o.

dockerfile
```
ARG APP_NAME
ARG APP_VERSION
```
Esses argumentos podem ser passados durante o build:

bash
```
docker build --build-arg APP_NAME=Teste --build-arg APP_VERSION=1.2 .
```
# 5. Restri√ß√µes do ARG
1. **N√£o Dispon√≠vel no Cont√™iner**:
   - Vari√°veis `ARG` n√£o est√£o dispon√≠veis no cont√™iner final, a menos que sejam usadas para definir `ENV`.

2. **N√£o Persistentes**:
  - N√£o s√£o inclu√≠das nas camadas da imagem, exceto se forem explicitamente usadas em comandos como `RUN`.

3. **Necessidade de Defini√ß√£o Anterior**:
   - Se voc√™ quiser usar um `ARG` antes de sua defini√ß√£o, o Docker retornar√° um erro.

# 6. Usos Comuns do ARG
## 6.1 Configura√ß√£o de Build
Passar par√¢metros como o nome, a vers√£o da aplica√ß√£o ou a porta que a aplica√ß√£o ir√° usar.

## 6.2 Escolha de Imagem Base
Criar imagens din√¢micas que podem usar diferentes vers√µes de imagens base.

## 6.3 Informa√ß√µes Din√¢micas
Configurar o comportamento do build com base em vari√°veis passadas no momento da constru√ß√£o.

# 7. Exemplo Completo
## Dockerfile
dockerfile
```
# Definir argumentos para o build
ARG APP_NAME="Minha Aplica√ß√£o"
ARG APP_VERSION="1.0.0"

# Usar uma imagem base din√¢mica
ARG BASE_IMAGE=alpine:3.14
FROM $BASE_IMAGE

# Adicionar argumentos como vari√°veis de ambiente
ENV APP_NAME=$APP_NAME
ENV APP_VERSION=$APP_VERSION

# Exibir informa√ß√µes no build
RUN echo "Construindo $APP_NAME vers√£o $APP_VERSION na base $BASE_IMAGE"

# Configura√ß√£o do cont√™iner
CMD ["sh", "-c", "echo Executando $APP_NAME vers√£o $APP_VERSION"]
```
## Construindo a Imagem
bash
```
docker build --build-arg APP_NAME="App de Exemplo" --build-arg APP_VERSION="2.0.0" -t app-exemplo .
```
## Executando o Cont√™iner
bash
```
docker run app-exemplo
```
## Sa√≠da:

```
Executando App de Exemplo vers√£o 2.0.0
```
# 8. Boas Pr√°ticas com ARG
1. **Defina Valores Padr√£o**:
- Sempre forne√ßa valores padr√£o para `ARG` para evitar erros:

dockerfile
```
ARG APP_VERSION=1.0.0
```
1. **Documente Argumentos**:
- Liste todos os argumentos no in√≠cio do Dockerfile para facilitar a compreens√£o:

dockerfile
```
ARG BASE_IMAGE
ARG APP_VERSION
```
3. **Use ARG com Imagens Base Din√¢micas**:
- Facilite a escolha de imagens base:

dockerfile
```
ARG BASE_IMAGE=ubuntu:20.04
FROM $BASE_IMAGE
```
4. **Combine ARG e ENV para Reutiliza√ß√£o**:
- Use `ARG` para configura√ß√£o din√¢mica e `ENV` para persistir vari√°veis no cont√™iner.

# 9. Conclus√£o
A instru√ß√£o `ARG` √© uma poderosa ferramenta para criar imagens Docker din√¢micas e configur√°veis. Com ela, voc√™ pode ajustar os valores de build de maneira flex√≠vel, garantindo que sua imagem seja mais reutiliz√°vel e f√°cil de gerenciar.

## Resumo:
- **Disponibilidade**: Apenas durante o build.
- **Usos**: Configura√ß√£o din√¢mica, escolha de imagens base, parametriza√ß√£o de builds.
- **Melhores Pr√°ticas**: Combine com ENV para persistir valores importantes no cont√™iner.

Se precisar de mais exemplos ou ajuda com um caso espec√≠fico, √© s√≥ perguntar! üöÄüòä