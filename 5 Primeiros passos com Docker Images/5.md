# Como Funciona o Docker Commit
O comando `docker commit` permite criar uma **imagem Docker** a partir de um contÃªiner existente. Ele Ã© Ãºtil para capturar o estado atual de um contÃªiner, incluindo alteraÃ§Ãµes feitas manualmente, e transformÃ¡-lo em uma nova imagem.

# 1. Por Que Usar o Docker Commit?
- **Capturar AlteraÃ§Ãµes Manuais**: Se vocÃª instalou pacotes ou configurou algo em um contÃªiner manualmente, pode salvar essas alteraÃ§Ãµes em uma imagem.
- **Criar Imagens Personalizadas**: Permite criar imagens personalizadas sem usar um Dockerfile.
- **Backup de ConfiguraÃ§Ãµes**: VocÃª pode capturar o estado de um contÃªiner como backup para reutilizÃ¡-lo no futuro.

# 2. Funcionamento do Docker Commit
O comando `docker commit` pega o sistema de arquivos atual de um contÃªiner e cria uma nova imagem a partir dele.

## Sintaxe BÃ¡sica
bash
```
docker commit [opÃ§Ãµes] <container_id> <nome_da_imagem>
```
# 3. Exemplo PrÃ¡tico
## Passo 1: Criar e Rodar um ContÃªiner
Execute um contÃªiner com uma imagem base, como o Ubuntu:

bash
```
docker run -it ubuntu
```
## Passo 2: Fazer AlteraÃ§Ãµes no ContÃªiner
Dentro do contÃªiner, instale um pacote ou modifique arquivos:

bash
```
apt-get update && apt-get install -y curl
echo "OlÃ¡, mundo!" > /home/mensagem.txt
```
Saia do contÃªiner digitando `exit`.

## Passo 3: Capturar o Estado do ContÃªiner
Use o comando `docker commit` para criar uma imagem com base no contÃªiner modificado:

bash
```
docker commit <container_id> ubuntu-personalizado
```
- `<container_id>`: ID ou nome do contÃªiner.
- `ubuntu-personalizado`: Nome da nova imagem.

Para encontrar o `container_id`, use:

bash
```
docker ps -a
```
## Passo 4: Verificar a Nova Imagem
Liste as imagens disponÃ­veis:

bash
```
docker images
```
VocÃª verÃ¡ uma nova imagem chamada `ubuntu-personalizado`.

# 4. Rodar um ContÃªiner a Partir da Nova Imagem
Execute um contÃªiner baseado na imagem que vocÃª criou:

bash
```
docker run -it ubuntu-personalizado
```
Dentro do contÃªiner:

- Verifique se o pacote instalado ainda estÃ¡ disponÃ­vel:
bash
```
curl --version
```
- Confira o arquivo criado:
bash
```
cat /home/mensagem.txt
```
# 5. Adicionando Metadados com Docker Commit
VocÃª pode adicionar informaÃ§Ãµes, como o autor e uma mensagem descritiva, ao usar o comando `docker commit`.

## Exemplo com Metadados
bash
```
docker commit -a "Seu Nome" -m "Imagem personalizada com curl e mensagem" <container_id> ubuntu-personalizado
```
- `-a`: Define o autor da imagem.
- `-m`: Adiciona uma mensagem descritiva Ã  imagem.

Para visualizar os metadados da imagem:

bash
```
docker inspect ubuntu-personalizado
```
# 6. LimitaÃ§Ãµes do Docker Commit
Embora Ãºtil em algumas situaÃ§Ãµes, o `docker commit` nÃ£o Ã© ideal para todos os casos:

1. **Dificuldade de Reproduzir o Build**:
- AlteraÃ§Ãµes manuais em contÃªineres sÃ£o difÃ­ceis de reproduzir de forma consistente.
- Usar um Dockerfile Ã© mais recomendÃ¡vel para criar imagens reutilizÃ¡veis e versionadas.

2. **Imagens Maiores**:
- O `docker commit` pode gerar imagens maiores, pois inclui o estado completo do contÃªiner, incluindo arquivos temporÃ¡rios.

3. **Falta de AutomaÃ§Ã£o**:
- Criar imagens com `docker commit` Ã© um processo manual, dificultando a integraÃ§Ã£o em pipelines de CI/CD.

# 7. Boas PrÃ¡ticas ao Usar Docker Commit
1. **Use Apenas para Prototipagem**:
- O `docker commit` Ã© Ãºtil para testes ou criaÃ§Ã£o rÃ¡pida de imagens durante o desenvolvimento, mas nÃ£o deve ser usado para produÃ§Ã£o.

2. **Documente as AlteraÃ§Ãµes**:
- Sempre adicione mensagens descritivas ao criar imagens com o `docker commit` usando a flag `-m`.

3. **Converta para Dockerfile**:
- Assim que tiver o estado desejado no contÃªiner, considere criar um `Dockerfile` com as etapas realizadas, garantindo reprodutibilidade.

# 8. Exemplo: Converter Docker Commit para Dockerfile
Se vocÃª usou o `docker commit` para criar uma imagem, pode inspecionar a imagem e converter suas alteraÃ§Ãµes em um Dockerfile.

## Passo 1: Inspecionar a Imagem
Obtenha os detalhes da imagem criada:

bash
```
docker inspect ubuntu-personalizado
```
## Passo 2: Criar um Dockerfile
Baseie-se nas alteraÃ§Ãµes feitas e crie um `Dockerfile`:

dockerfile
```
FROM ubuntu
RUN apt-get update && apt-get install -y curl
COPY mensagem.txt /home/mensagem.txt
```
Coloque o conteÃºdo do arquivo `mensagem.txt` no mesmo diretÃ³rio do Dockerfile.

## Passo 3: Recriar a Imagem
Construa a imagem usando o Dockerfile:

bash
```
docker build -t ubuntu-personalizado .
```
# 9. ConclusÃ£o
O `docker commit` Ã© uma ferramenta poderosa para capturar o estado de um contÃªiner e criar imagens personalizadas rapidamente. No entanto, para workflows mais robustos, Ã© melhor usar um Dockerfile para garantir reprodutibilidade e automaÃ§Ã£o. Use o `docker commit` principalmente em situaÃ§Ãµes de prototipagem ou backup rÃ¡pido.

Se precisar de ajuda para criar imagens ou configurar um Dockerfile, Ã© sÃ³ pedir! ğŸ˜Š